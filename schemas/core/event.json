{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://spp.dev/schemas/core/event.json",
  "title": "Event",
  "description": "Schema for event content type in SPS",
  "type": "object",
  "allOf": [
    {
      "$ref": "https://spp.dev/schemas/sps-license-metadata.json"
    },
    {
      "properties": {
        "sps_type": {
          "const": "event"
        },
        "location": {
          "oneOf": [
            {
              "type": "object",
              "description": "Geographic coordinates",
              "properties": {
                "lat": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90
                },
                "lng": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180
                }
              },
              "required": ["lat", "lng"],
              "additionalProperties": false
            },
            {
              "type": "string",
              "description": "Place ID or address"
            }
          ]
        },
        "start_time": {
          "type": "string",
          "format": "date-time",
          "description": "Event start time"
        },
        "end_time": {
          "type": "string",
          "format": "date-time",
          "description": "Event end time"
        },
        "timezone": {
          "type": "string",
          "description": "Event timezone (IANA timezone identifier)",
          "examples": ["America/New_York", "Europe/London", "Asia/Tokyo"]
        },
        "rsvp_url": {
          "type": "string",
          "format": "uri",
          "description": "URL for RSVP or registration"
        },
        "venue": {
          "type": "object",
          "description": "Event venue information",
          "properties": {
            "name": {
              "type": "string"
            },
            "address": {
              "type": "string"
            },
            "capacity": {
              "type": "integer",
              "minimum": 0
            }
          },
          "additionalProperties": false
        },
        "organizer": {
          "$ref": "https://spp.dev/schemas/common/publisher.json"
        },
        "attendee_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Current number of attendees"
        },
        "max_attendees": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum number of attendees allowed"
        },
        "ticket_price": {
          "type": "object",
          "description": "Ticket pricing information",
          "properties": {
            "amount": {
              "type": "string",
              "pattern": "^\\d+(\\.\\d{1,2})?$"
            },
            "currency": {
              "type": "string",
              "pattern": "^[A-Z]{3}$"
            },
            "free": {
              "type": "boolean",
              "description": "Whether the event is free"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["start_time"]
    }
  ]
}